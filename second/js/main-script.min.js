function ibg(){const e=document.querySelectorAll(".ibg");for(let t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage=`url(${e[t].querySelector("img").getAttribute("src")})`)}ibg();const headerBurger=document.querySelector(".header__burger"),headerNavigation=document.querySelector(".header__navigation");headerBurger.onclick=function(){headerNavigation.classList.toggle("header__navigation-open"),headerBurger.classList.toggle("active"),document.body.classList.toggle("lock")};const form=document.querySelector(".mortgage__form");function isEmpty(e){return!e||0===e.length}form.addEventListener("blur",(function(e){let t=e.target,n=Number(t.value),r=n.toLocaleString("ru-RU");0==isEmpty(n)&&(t.value=r)}),!0);const btnInput=form.querySelectorAll(".btn-input"),choiceBlock=form.querySelectorAll(".choice-block");btnInput.forEach((e,t)=>{e.addEventListener("click",(function(e){choiceBlock[t].classList.toggle("choice-block_active")}))}),document.onclick=function(e){if("choice-block__item"!=e.target.className){let t=e.target;console.log(t,"Вне");let n=t.closest(".mortgage__form");console.log(n),n.classList.remove("choice-block_active")}else console.log("Внутри")};const paymentImg=document.querySelector(".column-payment__img"),paymentPrompt=document.querySelector(".column-payment__prompt");paymentImg.addEventListener("click",(function(e){paymentPrompt.classList.toggle("column-payment__prompt_open")}));const layer=document.querySelector(".parallax__layer");function parallax(e){layer.style.transform=`translateX(${e.clientX/50}px) translateY(${e.clientY/50}px)`}function createNewObj(e,t,n){let r=document.createElement(e);return r.classList.add(t),r.innerHTML=n,r}document.addEventListener("mousemove",parallax),document.addEventListener("DOMContentLoaded",(function(){let e=0;const t=document.querySelectorAll(".slider__item"),n=document.querySelector(".slider__track"),r=document.querySelector(".slider__btn-prev"),o=document.querySelector(".slider__btn-next"),l=t.length;function c(){n.style.transform=`translateX(${e}%)`}function a(){r.disabled=0===e,o.disabled=e<=100*-(l-1)}r.onclick=function(){const t=Math.abs(e)/100;e+=t>=1?100:100*t,c(),a()},o.onclick=function(){const t=l-(Math.abs(e)+100)/100;e-=t>=1?100:100*t,c(),a()},a()}));const ad=document.querySelector(".ad"),declaration=document.querySelector(".declaration");class MainSlider extends HTMLDivElement{constructor(){super();let e=ad.cloneNode(!0),t=declaration.cloneNode(!0),n=createNewObj("a","slider__btn-detail","Подробнее");n.setAttribute("href","#"),this.prepend(e,t,n)}}customElements.define("main-slider",MainSlider,{extends:"div"});class BankTerms extends HTMLDivElement{constructor(){super();let e=window.matchMedia("(max-width: 991px)"),t=this.querySelector(".terms-component__bid"),n=(this.querySelector(".terms-component__bid .terms-component__title"),this.querySelector(".terms-component__payment")),r=createNewObj("a","begin-terms__btn","Подробнее"),o=createNewObj("div","terms-component__text-grey","Ставка"),l=createNewObj("div","terms-component__text-grey","Платеж");r.setAttribute("href","#"),this.prepend(r),t.prepend(o),n.prepend(l);let c=this.querySelector(".terms-component__sum .terms-component__title"),a=c.innerHTML,i=c.cloneNode(!0);function s(e){if(e.matches){let e=a.replace(/\s+/g,"").match(/\d+/g),t=String(Number(e[1])/1e6).replace(".",",");c.innerHTML=`до ${t}млн. ₽`}else c.innerHTML=i.innerHTML}e.addEventListener("change",s),s(e)}}customElements.define("bank-terms",BankTerms,{extends:"div"});const breadCrumb=document.querySelector(".breadcrumb");class BreadCrumb extends HTMLElement{constructor(){super();const e=document.querySelectorAll(".breadcrumb__item");for(let t=0;t<e.length-1;t++){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("fill","none"),n.setAttribute("viewbox","0 0 5 6"),n.setAttribute("width","5px"),n.setAttribute("height","6px"),r.setAttribute("d","M1.35348 5.85351L4.20698 3.00001L1.35348 0.146515L0.646484 0.853515L2.79298 3.00001L0.646484 5.14651L1.35348 5.85351Z"),r.setAttribute("fill","#38424E"),n.appendChild(r),e[t].append(n)}}}customElements.define("bread-crumb",BreadCrumb,{extends:"nav"});var $tabs=function(e){var t,n="string"==typeof e?document.querySelector(e):e,r=function(e){var n,r,o;n=document.querySelector(e.getAttribute("href")),r=e.parentElement.querySelector(".tabs__link_active"),o=n.parentElement.querySelector(".tabs__pane_show"),e!==r&&(null!==r&&r.classList.remove("tabs__link_active"),null!==o&&o.classList.remove("tabs__pane_show"),e.classList.add("tabs__link_active"),n.classList.add("tabs__pane_show"),document.dispatchEvent(t))};return t=new CustomEvent("tab.show",{detail:n}),n.addEventListener("click",(function(e){var t=e.target.closest(".tabs__link");t&&(e.preventDefault(),r(t))})),{showTab:function(e){r(e)},switchTabTo:function(e){var t,o;t=e,(o=n.querySelectorAll(".tabs__link")).length>0&&(t>o.length?t=o.length:t<1&&(t=1),r(o[t-1]))}}};$tabs(".tabs");const text=document.getElementById("link-spoiler"),ele=document.getElementById("content-spoiler"),mediaQuerySpoiler=window.matchMedia("(min-width: 576px)");function Spoiler(){"flex"==ele.style.display?(ele.style.display="none",text.innerHTML="Показать больше"):(ele.style.display="flex",text.innerHTML="Скрыть")}function handleTabletChange(e){e.matches?"none"==ele.style.display&&(ele.style.display="flex"):(ele.style.display="none",text.innerHTML="Показать больше")}text.onclick=Spoiler,mediaQuerySpoiler.addEventListener("change",handleTabletChange),handleTabletChange(mediaQuerySpoiler);